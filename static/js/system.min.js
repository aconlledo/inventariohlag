function CrearListaFono(t){const e=document.querySelector(t),n=window.intlTelInput(e,{initialCountry:"auto",geoIpLookup:function(t){fetch("https://ipinfo.io/json?token=184b70b2b3b7b5").then(t=>t.json()).then(e=>{const n=e.country||"cl";t(n)}).catch(()=>t("cl"))},preferredCountries:["cl","ar","pe","co","br"],utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});$(t).on("input",function(){limpiarInputTelefono(this)}),$(t).on("blur",function(){validarTelefono(this,t,n)})}function limpiarInputTelefono(t){t.value=t.value.replace(/[^\d+]/g,""),t.value.indexOf("+")>0&&(t.value=t.value.replace(/\+/g,""))}function validarTelefono(t,e,n){const a=n.getNumber(),i=n.getSelectedCountryData().iso2,r=t;let o=n.isValidNumber();const s=$(e+"-error");if("cl"===i){const t=a.replace("+56","");/^\d{9}$/.test(t)||(o=!1)}o?s.hide():(s.show(),setTimeout(()=>r.focus(),10)),$(t).val(n.getNumber())}function limpiarPesos(t){return t.replace(/\$/g,"").replace(/\./g,"").trim()}function horaEnServidor(){$.ajax({url:"/usuarios/hora_servidor",data:{},type:"GET",dataType:"JSON",success:function(t){let e=t.hora_servidor,n=e.split(" ")[1].substring(0,5);return n},error:function(t,e,n){MensajeErrorDesconocido("There was a problem with the request: ERROR(1)",e,n)}})}function fluidDialog(){var t=$(".ui-dialog:visible");t.each(function(){var t=$(this),e=t.find(".ui-dialog-content").data("ui-dialog");if(e&&e.options&&e.options.fluid){var n=$(window).width();n<e.options.maxWidth+50?t.css("max-width","90%"):t.css("max-width",e.options.maxWidth),e.option("position",e.options.position)}})}function limpiarNombreArchivo(t){return t.replace(/[^a-zA-Z0-9.]/g,"")}function CampoEnReadOnly(t){$("#"+t).css({"background-color":"#F0EAE9"}),$("#"+t).attr("readonly","readonly")}function CampoEnReadWrite(t){$("#"+t).css({"background-color":"#FFFFFF"}),$("#"+t).removeAttr("readonly")}function CampoDisabled(t){$("#"+t).css({"background-color":"#F0EAE9"}),$("#"+t).attr("disabled","disabled")}function CampoEnabled(t){$("#"+t).css({"background-color":"#FFFFFF"}),$("#"+t).removeAttr("disabled")}function PintarClaseReadOnly(){$(".inronly1").css({"background-color":"#F0EAE9"}),$(".inronly1").attr("readonly","readonly")}function PintarClaseDisabled(){$(".inronly2").css({"background-color":"#F0EAE9"}),$(".inronly2").attr("disabled","disabled")}function validarFechas(t,e){var n=t.split("-"),a=n[2]+"-"+n[1]+"-"+n[0],i=new Date(a);n=e.split("-"),a=n[2]+"-"+n[1]+"-"+n[0];var r=new Date(a);return!(i>=r)}function fechaEnCastellano(t){var e=t.split("-");return`${e[2]}-${e[1]}-${e[0]}`}function sumaDiasFecha(t,e){let n=new Date(t);n.setDate(n.getDate()+e);let a=n.getFullYear(),i=("0"+(n.getMonth()+1)).slice(-2),r=("0"+n.getDate()).slice(-2),o=`${a}-${i}-${r}`;return o}function fechaHoySql(){var t=new Date,e=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);return e}function getMonday(t){t=new Date(t);let e=t.getDay(),n=t.getDate()-e+(0==e?-6:1);return new Date(t.setDate(n))}function formatDate(t){let e=new Date(t),n=""+(e.getMonth()+1),a=""+e.getDate(),i=e.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[i,n,a].join("-")}function fecha_str_to_sql(t){var e=t.split("-"),n=e[0],a=e[1],i=e[2],r=`${i}-${a}-${n}`;return r}function allTrim(t=""){return t.trim()}function lTrim(t=""){return t.trimStart()}function rTrim(t=""){return t.trimEnd()}function Trim(t=""){return t.replace(/^\s+/g,"").replace(/\s+$/g,"")}function validarNumero(t,e,n="int"){const a=$(t).val().trim();if(""==a)return!0;let i=a.replace(/\./g,"");return i=i.replace(",","."),"int"===n?!!/^-?\d+$/.test(i)||(mostrarMensaje("The value indicated in"+e+" is not a valid integer!",MSG_STOP),!1):"float"===n?!isNaN(i)&&""!==i||(mostrarMensaje("The value indicated in "+e+" is not a valid decimal number!",MSG_STOP),!1):(mostrarMensaje("Validation type not recognized: "+n,MSG_STOP),!1)}function number_format(t,e=0,n=",",a="."){t=number_unformat(t,a),t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+t)?+t:0,r=isFinite(+e)?Math.abs(e):0,o=void 0===a?".":a,s=void 0===n?",":n,l="",c=function(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n};return l=(r?c(i,r):""+Math.round(i)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(l[1]||"").length<r&&(l[1]=l[1]||"",l[1]+=new Array(r-l[1].length+1).join("0")),0===r?l[0]:l.join(s)}function number_unformat(t,e="."){var n=String(t);return""!=t&&(n=$.trim(t),"."==e?(n=n.replace(/[.]/g,""),n=n.replace(",",".")):n=n.replace(/[,]/g,"")),Number(n)}function number_puntoxcoma(t){var e=String(t);return e.replace(/[.]/g,",")}function formatNumber(t,e=0){return t.toLocaleString("es-CL",{minimumFractionDigits:e,maximumFractionDigits:e})}function textvalida(t,e){if(tecla=document.all?t.keyCode:t.which,13==tecla)return filas=e.rows,txt=e.value.split("\n"),txt.length<filas}function validarCorreo(t){var e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!!e.test(t)}function MensajeErrorDesconocido(t){mostrarMensaje("UNKNOWN ERROR. Please communicate Error=("+t+") to Administrator",MSG_STOP)}function mostrarMensaje(t,e=0){var n;switch(e){case 0:n="<button class='btn btn-sm btn-success'><i class='fa-regular fa-thumbs-up'></i>&nbsp&nbspW A R N i N G:";break;case 1:n="<button class='btn btn-sm btn-warning'><i class='fa-regular fa-bell'></i>&nbsp&nbspA T T E N T I O N:";break;default:n="<button class='btn btn-sm btn-danger'><i class='fa-regular fa-hand'></i>&nbsp&nbspS T O P:"}var a="<div id='msg' title='Mensaje del Sistema'><span style='float: left; margin: 0 7px 50px 0;'><p class='tit10lb'>"+n+"</button><p>"+t+"</p></span></div>";enviarmostrarMensaje(a)}function enviarmostrarMensaje(t){var e=$(t);e.dialog({modal:!0,show:"puff",hide:"scale",width:450,minWidth:200,maxWidth:400,minHeight:100,resizable:!1,position:{my:"center",at:"center center",of:window},buttons:[{text:"Ok",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Green"}]})}function confirmarMensaje(t,e,n,a){var i="<div id='msg' title='System Message'><span style='float: left; margin: 0 7px 50px 0;'><p class='tit10lb'><button class='btn btn-sm btn-warning'><i class='fa-solid fa-circle-question'></i></button>&nbsp&nbsp&nbspA T T E N T I O N:</p><p>"+t+"</p> Are you Sure?</span></div>";enviarconfirmarMensaje(i,e,n,a)}function enviarconfirmarMensaje(t,e,n,a){var i=$(t);i.dialog({modal:!0,show:"puff",hide:"scale",height:300,width:450,resizable:!1,position:{my:"center",at:"center center",of:window},buttons:[{text:"Confirm",click:function(){try{e(n,a)}catch(t){}$(this).dialog("close")},class:"ui-corner-all",style:"color:Green"},{text:"Cancel",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Red"}]})}function ConfirmarySubmit(t){var e="<div id='msg' title='System Message'><span style='float: left; margin: 0 7px 50px 0;'><p class='tit10lb'><img src='./imagenes/notice.png' border='0' width='24' height='24' />&nbsp&nbsp&nbspA T T E N T I O N:</p><p>"+t+"</p> Are you Sure?</span></div>";_confirmarySubmit(e)}function _confirmarySubmit(t){var e=$(t);e.dialog({modal:!0,show:"puff",height:250,width:400,resizable:!1,position:{my:"center",at:"center bottom",of:window},buttons:{Confirm:function(){$("form").submit(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})}function sumaFecha(t,e){var n=new Date,a=e||n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),i=-1!=a.indexOf("/")?"/":"-",r=a.split(i);e=r[2]+"/"+r[1]+"/"+r[0];e=new Date(e),e.setDate(e.getDate()+parseInt(t));var o=e.getFullYear(),s=e.getMonth()+1,l=e.getDate();s=s<10?"0"+s:s,l=l<10?"0"+l:l;var c=l+i+s+i+o;return c}function timeToMinutes(t){let[e,n]=t.split(":").map(Number);return parseInt(60*e+n)}function minutesToTime(t){let e=Math.floor(t/60).toString().padStart(2,"0"),n=(t%60).toString().padStart(2,"0");return`${e}:${n}`}function efectoTemblor(t){const e=t,n=80,a=10,i=4;for(let t=0;t<i;t++)e.animate({left:-a},n).animate({left:a},n);e.animate({left:0},n)}const MaxNum=999999999999,MaxMon=9999999999,IVA=.19,DIGITOSVENTAS=2,DIGITOSCOSTOS=4,DIGITOSCANTIDAD=4,DIGITOSPORCENTAJE=2,MSG_SUCCESS=0,MSG_WARNING=1,MSG_STOP=2,ELIMINAR_REG=0,AGREGAR_REG=1,EDITAR_REG=2,VER_REG=3,BLOQUEAR_REG=4,DESBLOQUEAR_REG=5;var ACCION=EDITAR_REG,idGlobal1=0,idGlobal2=0,idGlobal3=0,idGlobal4=0;const REGIONMETRO=13;$(document).ready(function(){$(window).resize(function(){fluidDialog()}),$(document).on("dialogopen",".ui-dialog",function(t,e){fluidDialog()}),$(".tip").tooltip(),$("input").addClass("ui-corner-all"),$(".uppcase").blur(function(){$("#chk_upper").length?$("#chk_upper").is(":checked")&&$(this).val($(this).val().toUpperCase()):$(this).val($(this).val().toUpperCase())}),$(".lowcase").blur(function(){$(this).val($(this).val().toLowerCase())}),$(".ucword").blur(function(){$(this).val($(this).val().ucwords())})});var fechaOriginal="17-12-2024";String.prototype.ucwords=function(){return str=this.toLowerCase(),str.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(t){return t.toUpperCase()})};