function PrepararRegistro(e){$("#id").val(allTrim($("#id"+e).html())),$("#nombre").val(allTrim($("#nom"+e).html()))}function CamposValidos(){var e=allTrim($("#nombre").val());return""!=e||(mostrarMensaje("Debe indicar Nombre",MSG_STOP),!1)}function EditarRegistro(e){CampoEnReadWrite("nombre"),PrepararRegistro(e),$("#diagedit").dialog({title:"Edit Register",buttons:[{text:"Save",click:function(){CamposValidos()&&(EnviaPeticionAjax(EDITAR_REG,e),$(this).dialog("close"))},class:"ui-corner-all",style:"color:Green"},{text:"Exit",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Black"}]}),$("#diagedit").dialog("open")}function AgregarRegistro(){CampoEnReadWrite("nombre"),$("#id").val(""),$("#diagedit").dialog({title:"Add Register",buttons:[{text:"Save",click:function(){CamposValidos()&&(EnviaPeticionAjax(AGREGAR_REG,0),$(this).dialog("close"))},class:"ui-corner-all",style:"color:Green"},{text:"Exit",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Black"}]}),$("#diagedit").dialog("open")}function BorrarRegistro(e){CampoEnReadOnly("nombre"),PrepararRegistro(e),$("#diagedit").dialog({title:"Delete Register",buttons:[{text:"Delete",click:function(){$(this).dialog("close"),confirmarMensaje("The register will be removed from the Database.",EnviaPeticionAjax,ELIMINAR_REG,e)},class:"ui-corner-all",style:"color:Red"},{text:"Exit",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Green"}]}),$("#diagedit").dialog("open")}function EnviaPeticionAjax(e,a){var i=allTrim($("#nombre").val()),t=allTrim($("#tabla").val()),o="/tablas/tablasimple/"+t+"/";try{$.ajax({async:!1,type:"POST",dataType:"html",url:o,data:{accion:e,id:a,nombre:i,tabla:t,csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(e){""!=e?($("#datatablediv").html(""),$("#datatablediv").html(e),Crear_DataTable(),mostrarMensaje("Change made successfully",MSG_SUCCESS)):mostrarMensaje("UNKNOWN ERROR<br />Change NOT made",MSG_WARNING)}})}catch(e){MensajeErrorDesconocido(e)}}function Crear_DataTable(){$("#tablaregs").DataTable({destroy:!0,paging:!0,pagingType:"full_numbers",bJQueryUI:!0,iDisplayLength:25,order:[[1,"asc"]],columnDefs:[{orderable:!1,targets:[2]},{searchable:!1,targets:[0,2]}]}),$(".tip").tooltip()}$(document).ready(function(){var e=new LiveValidation("nombre");e.add(Validate.Presence),$("#diagedit").dialog({autoOpen:!1,position:{my:"center",at:"center",of:window},height:380,width:500,resizable:!1,modal:!0,show:{effect:"blind",duration:1e3},hide:{effect:"explode",duration:1e3},open:function(){$("#nombre").focus()},close:function(){$("#id").val(""),$("#nombre").val("")}}),CampoEnReadOnly("id"),Crear_DataTable()});