function PrepararRegistro(a){$("#id").val(allTrim($("#id"+a).html())),$("#nombre").val(allTrim($("#nom"+a).html())),$("#fabricante").val($("#fabid"+a).val())}function CamposValidos(){var a=allTrim($("#nombre").val());return""!=a||(mostrarMensaje("Must indicate Model Name",MSG_STOP),!1)}function EditarRegistro(a){CampoEnReadWrite("nombre"),CampoEnabled("fabricante"),PrepararRegistro(a),$("#diagedit").dialog({title:"Edit Model",buttons:[{text:"Save",click:function(){CamposValidos()&&(EnviaPeticionAjax(EDITAR_REG,a),$(this).dialog("close"))},class:"ui-corner-all",style:"color:Green"},{text:"Exit",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Black"}]}),$("#diagedit").dialog("open")}function AgregarRegistro(){CampoEnReadWrite("nombre"),CampoEnabled("fabricante"),$("#id").val(""),$("#diagedit").dialog({title:"Add Model",buttons:[{text:"Save",click:function(){CamposValidos()&&(EnviaPeticionAjax(AGREGAR_REG,0),$(this).dialog("close"))},class:"ui-corner-all",style:"color:Green"},{text:"Exit",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Black"}]}),$("#diagedit").dialog("open")}function BorrarRegistro(a){CampoEnReadOnly("nombre"),CampoDisabled("fabricante"),PrepararRegistro(a),$("#diagedit").dialog({title:"Delete Model",buttons:[{text:"Delete",click:function(){$(this).dialog("close"),confirmarMensaje("The Model will be removed from the Database.",EnviaPeticionAjax,ELIMINAR_REG,a)},class:"ui-corner-all",style:"color:Red"},{text:"Exit",click:function(){$(this).dialog("close")},class:"ui-corner-all",style:"color:Green"}]}),$("#diagedit").dialog("open")}function EnviaPeticionAjax(a,e){var i=allTrim($("#nombre").val()),t=$("#fabricante").val();try{$.ajax({async:!1,type:"POST",dataType:"html",url:"/tablas/modelos/",data:{accion:a,id:e,nombre:i,fabricante:t,csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(a){""!=a?($("#datatablediv").html(""),$("#datatablediv").html(a),Crear_DataTable(),mostrarMensaje("Change made successfully",MSG_SUCCESS)):mostrarMensaje("UNKNOWN ERROR<br />Change NOT made",MSG_WARNING)}})}catch(a){MensajeErrorDesconocido(a)}}function Crear_DataTable(){$("#tablaregs").DataTable({destroy:!0,paging:!0,pagingType:"full_numbers",bJQueryUI:!0,iDisplayLength:25,order:[[1,"asc"]],columnDefs:[{orderable:!1,targets:[3]},{searchable:!1,targets:[0,3]}]}),$(".tip").tooltip()}$(document).ready(function(){var a=new LiveValidation("nombre");a.add(Validate.Presence);var e=new LiveValidation("fabricante");e.add(Validate.Presence),$("#diagedit").dialog({autoOpen:!1,position:{my:"center",at:"center",of:window},height:380,width:500,resizable:!1,modal:!0,show:{effect:"blind",duration:1e3},hide:{effect:"explode",duration:1e3},open:function(){$("#nombre").focus()},close:function(){$("#id").val(""),$("#nombre").val(""),$("#fabricante").val("")}}),CampoEnReadOnly("id"),Crear_DataTable()});