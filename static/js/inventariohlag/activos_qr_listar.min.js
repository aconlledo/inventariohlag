function updateState(){const n=$(".chk").length,t=$(".chk:checked").length;$("#selectedCount").text(t+" Selected"),$("#printBtn").prop("disabled",0===t),$("#selectAll").prop("checked",t===n),$("#selectAll").prop("indeterminate",t>0&&t<n)}function Crear_DataTable(){$("#tablaregs").DataTable({destroy:!0,paging:!0,info:!1,pagingType:"full_numbers",bJQueryUI:!0,ordering:!1,lengthChange:!1,pageLength:8}),$(".qr-img").tooltip({html:!0})}$(document).ready(function(){$(document).on("change",".chk",updateState),$("#selectAll").on("change",function(){$(".chk").prop("checked",this.checked),updateState()}),updateState(),Crear_DataTable(),$("#newFilter").on("click",function(n){n.preventDefault(),window.location.href="/qr_filtrar"}),$("#printBtn").on("click",function(){const n=$(".chk:checked").closest(".qr-card");if(0===n.length)return;const t=window.open("","_blank"),e='\n    <!doctype html>\n    <html>\n    <head>\n        <meta charset="utf-8">\n        <title>Printing QR</title>\n        <style>\n\n            * {\n              margin: 0 !important;\n              padding: 0 !important;\n              box-sizing: border-box !important;\n            }\n\n            @page { size: Letter; margin: 0; }\n\n            body {\n                margin: 0;\n                padding: 0;\n            }\n\n            /* Contenedor exacto para 3Ã—8 etiquetas */\n            .grid {\n              width: 220mm;       \n              height: 280mm;  \n              display: grid;\n              grid-template-columns: 70mm 70mm 70mm;\n              grid-template-rows: repeat(8, 35mm);\n              column-gap: 5mm;\n              row-gap: 0mm;\n              margin: 0 auto;\n              background: white;\n            }\n\n            .card {\n              width: 70mm;\n              height: 35mm;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              overflow: hidden;\n              background: white;\n            }\n\n            img {\n                max-width: 100%;\n                max-height: 100%;\n                object-fit: contain;\n                display: block;\n            }\n        </style>\n    </head>\n    <body>\n    <div class="grid">\n    ',i="\n    </div>\n    </body>\n    </html>";let a=$("#fcell").val(),c="";for(let n=1;n<a;n++)c+='<div class="card"></div>';let o="";n.each(function(){const n=$(this).find("img").attr("src");o+=`\n            <div class="card">\n                <img src="${n}">\n            </div>\n        `}),t.document.write(e+c+o+i),t.document.close(),setTimeout(()=>{t.print(),t.close()},200)})});