function ValidarLogin(){var a=$("#useroclave").val();try{$.ajax({type:"POST",url:"validarlogin/",dataType:"json",data:{username:a,csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(a){200==a.status?($("#btnenviarolvidoclave").prop("disabled",!1),enviarMsgModaloClave("Confirm the sending of mail with new password to ",a.message)):(enviarMsgModaloClave("Error("+a.status+")",a.message),efectoTemblor($("#ModalOlvidoClave")))},error:function(a,e,o){enviarMsgModaloClave(e)}})}catch(a){enviarMsgModaloClave(a)}}function ConfirmaOlvidoClave(){var a=$("#userlost").val();$.ajax({type:"POST",url:"/usuarios/confirmaolvidoclave/",dataType:"json",data:{username:a,csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},beforeSend:function(){$("#loader-msg-wait").show()},success:function(a){$("#loader-msg-wait").hide(),200===a.status?mostrarModalOlvidoClave({mensaje:"New Password Created: "+a.message,botones:["end"]}):mostrarModalOlvidoClave({mensaje:a.message,botones:["send","cancel"],temblar:!0})},error:function(a,e,o){$("#loader-msg-wait").hide();let l=a.responseJSON&&a.responseJSON.message?a.responseJSON.message:o||e;mostrarModalOlvidoClave({mensaje:l,botones:["send","cancel"],temblar:!0})}})}function mostrarModalOlvidoClave(a){$("#ModalOlvidoClave").modal("show"),enviarMsgModaloClave(a.mensaje),$("#btnenviarolvidoclave").toggle(a.botones.includes("enviar")),$("#btncancelarolvidoclave").toggle(a.botones.includes("cancelar")),$("#btnfinolvidoclave").toggle(a.botones.includes("fin")),a.temblar&&efectoTemblor($("#ModalOlvidoClave"))}function limpiarMsgModaloClave(){$("#divmsgoclave1").text(""),$("#divmsgoclave2").text(""),$("#divmsgoclave").hide()}function enviarMsgModaloClave(a,e=""){$("#divmsgoclave1").text(a),$("#divmsgoclave2").text(e),$("#divmsgoclave").show()}function limpiarCamposModalLogin(){$("#username").val(""),$("#claveuser").val("")}function EnviarLogin(a,e){try{$.ajax({type:"POST",async:!1,url:"/usuarios/login_general/",dataType:"json",data:{username:a,password:e,csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},beforeSend:function(){$("#cclaveusername").val(a)},success:function(a){200==a.status?($("#LoginModal").hide(),$("#formlogin").attr("action",a.url),$("#formlogin")[0].submit()):201==a.status?($("#strengthMessage").html(""),$("#LoginModal").modal("hide"),$("#ModalcClave").modal({backdrop:"static",keyboard:!1}).modal("show"),$("#btncclavesko").click(function(){$("#ModalcClave").modal("hide"),$("#LoginModal").modal("show")})):(enviarMsgModalLogin(a.message1,a.message2),efectoTemblor($("#LoginModal")))},error:function(a,e,o){enviarMsgModalLogin("Error: ",e)}})}catch(a){enviarMsgModalLogin(a)}}function limpiarMsgModalLogin(){$("#divloginerror1").text(""),$("#divloginerror2").text(""),$("#divloginerror").hide()}function enviarMsgModalLogin(a,e=""){$("#divloginerror1").text(a),$("#divloginerror2").text(e),$("#divloginerror").show()}$(document).ready(function(){$("#btnenviarolvidoclave").click(function(){var a=$("#userlost").val();""==a?(enviarMsgModaloClave("Must Indicate a valid user"),efectoTemblor($("#ModalOlvidoClave"))):ConfirmaOlvidoClave()}),$("#btncancelarolvidoclave").click(function(){$("#ModalOlvidoClave").modal("hide"),$("#LoginModal").modal("show")}),$("#btnfinolvidoclave").click(function(){$("#btnenviarolvidoclave").show(),$("#btncancelarolvidoclave").show(),$("#btnfinolvidoclave").hide(),$("#ModalOlvidoClave").modal("hide"),$("#LoginModal").modal("show")}),$("#lnkolvidoclave").click(function(a){a.preventDefault(),$("#userlost").val(""),$("#btnfinolvidoclave").hide(),limpiarMsgModaloClave(),$("#LoginModal").modal("hide"),$("#ModalOlvidoClave").modal({backdrop:"static",keyboard:!1}).modal("show")}),$("#claveuser").addClass("bi-eye"),$("#togglePassword").click(function(){var a=$("#claveuser"),e=a.attr("type");"password"===e&&(a.attr("type","text"),$(this).find("i").removeClass("bi-eye").addClass("bi-eye-slash"),setTimeout(function(){a.attr("type","password"),$("#togglePassword").find("i").removeClass("bi-eye-slash").addClass("bi-eye")},3e3))}),$("#formlogin").on("submit",function(a){var e=$("#username").val(),o=allTrim($("#claveuser").val());a.preventDefault(),limpiarMsgModalLogin(),""==e?(enviarMsgModalLogin("You must enter a valid User."),efectoTemblor($("#LoginModal"))):""==o?(enviarMsgModalLogin("You must enter a valid Password."),efectoTemblor($("#LoginModal"))):EnviarLogin(e,o)}),$("#LoginModal").modal({backdrop:"static",keyboard:!1}).modal("show")});